\section{PLC}
En PLC\fn{PLC}{Programmable Logic Controller} kan betegnes som en en digital computer, designet til at håndtere multiple analog/digitale I/O. PLC'en anvendes primært til elektromekaniske anlæg, hvor de samme handlinger skal udføres sekventielt, med en lav fejlrate, og med en høj sekventiel udførselshastighed. PLC'en er et reeltids-system, hvoraf outputs' tilstande er et direkte resultat af indgangenes tilstand. I nedenstående afsnit vil PLC'ens hardware og software blive fremført, med formålet at kunne synliggøre PLC'ens fordele og ulemper. Ulemperne vil eventuelt kunne benyttes til problembeskrivelsen. \cite{PLC_hardware_desc} 

\subsection{Hardware}
Den største forskel mellem hardwaren på en PLC og andre digitale computere, er at PLC'er har en konstruktion, som egner sig specifikt til belastende arbejdsmiljøer. PLC'en er dermed ekstra beskyttet imod støv, temperatursvigninger og luftfugtighed. Figur \ref{fig:omron-plc} viser en af Omrons mest populære PLC'er, \enquote*{SYSMAC CP1H}. PLC'en har 24 indgange og 17 udgange, hvor COM-porten på indgangsmodulet, giver mulighed for at bestemme den fælles polaritet\mfix{Mangler forklaring}. Hertil kan der tilsluttes DC 24V eller DC 0V, afhængig af kundens præferencer. I Europa anvendes DC 0V som fælles polaritet, hvor i USA anvendes der DC 24V. 

\figur{Figurer/Billeder/plc-omron-hardware.jpg}{PLC Omron SYSMAC CP1H}{omron-plc}{0.6}

\noindent PLC'ers mekaniske konstruktion er meget varierende fra producent til producent, og fra model til model. Nogle producenter har adskillige modeller, som hver især er blevet konstrueret til et specifikt arbejdsmæssigt formål. Nogle modeller er således konstrueret med udvidelsesmoduler, hvor andre - mere simple PLC'er - er konstrueret med få indgange/udgange. 
Den store konstruktionsmæssige variation mellem PLC-fabrikanterne begrænser den enkelte virksomheds fleksibilitet. Der er således ikke mulighed for at sammenkoble et udvidelsesmodul af producenten, Omron, på en PLC produceret af Allen Bradly\cite{PLC-comb}. På figur \ref{fig:omron-plc} kan der ses en låge, som er markeret med EXP, hvilket giver mulighed for at udvide PLC'en med flere moduler.

I dag bliver de fleste automatiserede anlæg konstrueret med en PLC. Det giver den pågældende virksomhed mulighed for at konstruere et anlæg, hvor der skal færre tilpasninger til, før anlægget kan benyttes i flere forskellige arbejdsmiljøer. Det medvirker ligeledes til forøget fleksibilitet ved slutkunden, da reguleringer kan foretages hurtigt og uden større mekaniske indgreb.\\

\noindent I nedenstående afsnit vil tre PLC-producenter kortfattet blive introduceret. Indledningsvist vil Siemens blive introduceret, som er de største PLC-producenter på markedet. Omron er på lige fod med Siemens et udbredt fabrikat, som benyttes i rigtig mange automatiserede anlæg. Omron's PLC-model, \enquote*{SYSMAC CP1H}, er ligeledes tilgængelig for gruppen. CODESYS er de ledende udviklere af softwareapplikation til controller-systemets, og har udviklet CODESYS SP6, som bygger på det objekt-orienteret programmeringsparadigme.

\subsubsection{PLC-producenter}

\noindent\textbf{Siemens} er klart de største på PLC markedet, og igennem fire generationer af PLC'er, er Siemens definitivt en af de mest kompetente PLC-producenter på markedet - både på det hardware- såvel som det softwaremæssige plan. Den fjerde generation, \enquote*{Simatic S7} som er Siemens seneste udgave, bliver brugt i mange aspekter i industrien. Specielt Siemens' evne til at konstruere PLC'er med høj ydeevne, og til en lav pris, er Siemens force. I året 2012, lancerede Siemens et nyt IDE, som til stadighed benytter sig af den traditionelle RLL\fn{RLL}{Relay Ladder Logic}-programmeringsform. De har trods den massive softwaremæssige udvikling, med implementationen af det objekt-orienterede programmeringsparadigme, valgt at holde fast i den gamle programmeringsform. \\

\noindent\textbf{Omron} har eksisteret siden 1972, hvor Omron begyndte at producere små enheder til f.eks. lommeregnere. Nogle af disse komponenter blev blandt andet distribueret til Harvard University. Det var først i året 1977, da Omron påbegyndte deres PLC-standardlinje, kaldet SYSMAC PLC, at PLC blev deres førende produktionsserie. I dag har Omron ca. 40\% af markedet på PLC'er i Japan og opererer i mere end 80 lande i Europa, Nordamerika og Asien. Omron benytter sig stadig af RLL.\\

\noindent\textbf{CODESYS} er udviklet af det Tyske softwarefirma, 3S-Smart Software Solutions, som i år 1994 var klar med første udgave af CODESYS. Det som gør CODESYS unik, er at de har implementeret et objektorienteret programmeringssprog i version 3, som gør at man lettere kan adskille forskellige arbejdsopgaver, og dermed muligheden for at outsource dele af programmet. \\

\noindent Hvordan PLC-programmering har udviklet sig igennem årene, samt RLL's fordele og ulemper, vil det næste afsnit belyse nærmere.

\subsection{Software}
%% PDF TIL PLC-GENNEMGANG: 
%% http://www.etf.unssa.rs.ba/~slubura/Procesni%20racunari/Programmable%20Logic%20Controllers%204th%20Edition%20%28W%20Bolton%29.pdf
PLC-programmeringssproget har ikke udviklet sig meget siden indtoget i 1960’erne. 
Mange af PLC-producenterne holder fast i den oprindelige opfattelse; at PLC’er hovedsagligt anvendes til mindre programmeringsopgaver. De mest udbredte PLC’er til dato, programmeres stadig i paradigmet RLL. Programmeringssproget er primitivt, og det er meget besværligt at være produktiv – især ved større projekter. Dette skyldes blandt andet, at flere PLC-programmører ikke benytter sig af subrutiner, og ved større projekter, mister den enkelte programmør simpelthen overblikket. 

I året 1993 blev det første udkast til IEC\fn{IEC}{International Electrical Commission} 1131-3 standarden publiceret\cite{iecStandard}. Standarden havde til formål at sikre en generalisering af hvordan software til PLC'er skrives og forstås. Igennem årene er det blevet mere og mere normalt, at både slutkunden, leverandøren og PLC-producenten følger, og efterspørger denne standard. Mange slutkunder, står selvstændigt for vedligeholdelsen og reprogrammering af deres automatiserede anlæg, og har ikke den fornødne kapacitet til at få indopereret en ny standard i deres travle arbejdsmiljø. \\

\noindent Flere programmeringsfirmaer har dog forsøgt at indfase det objektorienterede paradigme i PLC-universet. For mange almindelige industriteknikere, som også fungerer som PLC-programmører i industrien, bliver OOP dog for omstændelig. Mange PLC-programmører holder derfor fast i de gamle og velkendte programmeringsrutiner. Dette kan i visse tilfælde, som tidligere nævnt, ligeledes skyldes arbejdspladsens konservative indgangsvinkel\cite{PLC_Siemens_OOP}.  \\

\noindent IEC 1131-3 standarden definerer fem forskellige programmeringssprog til en PLC. To grafiske (LAD og FBD) og tre tekstrepræsenterede (IL, SFC\fn{SFC}{Squential Function Charts} og ST\fn{ST}{Structured Text}) sprog. Alle sprog deler de samme objekter, hvilket gør det nemt at oversætte fra det ene sprog til det andet. Ligeledes giver det programmører mulighed for at manøvrere frit mellem alle sprog. Udfra egne programmeringspræferencer, kan programmøren dermed vælge det sprog, som bedst kan løse den pågældende opgave.

\subsubsection{Ladder Diagrams}
LAD\fn{LAD}{Ladder Diagrams} er et grafisk programmeringssprog, der har fået navnet fra dens grafiske repræsentation, som symboliserer en stige. LAD programmeres ved hjælp af logiske \textit{AND}, \textit{OR}, \textit{NOT}, \textit{NAND}, \textit{NOR}, \textit{XOR}-blokke, i en IDE som den enkelte PLC-producent har stillet til rådighed. I IDE'en kan man ved hjælp af Drag \& Drop-funktionalitet indsætte kontaktsæt, timere og andre kontaktelementer. På figur \ref{fig:Ladder} ses et simpelt LAD-program. \textit{AND} og \textit{OR}-kontaktsymboler kunne eventuelt repræsenterer et almindeligt relæ, som aktiverer en indgang på PLC'en. Første linje symboliserer, at udgangen Q10.00 bliver aktiv, såfremt kontaktsæt \textit{( ( 000.01 \&\& 000.04) || 000.00 ) \&\& 000.02 )} er aktiv.

\figur{Figurer/Billeder/Ladder.png}{Grafisk repræsentation af ladder programmering}{Ladder}{0.4}

\noindent RLL egner sig specifikt til simple programmer, hvor der kun anvendes binære variabler. Da eksekveringen af programmet sker trinvis sekventielt, kan der dermed opstå periodiske \textit{race conditions\fn{Race Condition}{Udtrykker at outputs er afhængig af en specifik hændelsesrækkefølge eller timing}}, som kan være meget besværlige at fejlfinde. Aritmetiske operationer og analoge input kan være besværlige at udtrykke; hvoraf notationen kan varierer på tværs af producenterne. Ydermere er iterative statements ikke understøttet, hvilket ofte leder til duplikeret kode.

\noindent LAD er den mest populære måde at konstruere og repræsentere et PLC-program på. Lærbarheden er høj, og det er nemt - såfremt programmet er småt - at gennemskue PLC-sprogets opbygning. Mange automatiserings-leverandører vælger at vedlægge et LAD-repræsenteret diagram, som slutkunden kan bruge i tilfælde af nedbrud, regulering eller udbyggelse. \cite{FDB_desc}

\subsubsection{Function Block Diagram}
FBD\fn{FBD}{Function Block Diagram} er ligeledes en grafiske programmeringsrepræsentation, og er PLC-programmeringssprogets nærmeste svar på kodegenbruglighed. FBD anvendes til at afbilde konkrete dataflows eller signaler igennem en funktionsblok - hvoraf det er muligt at konstruere skandaliserende\mfix{Hvad betyder det?} kontrolblokke, som kan genanvendes i flere forskellige softwaremæssige sammenhænge. FBD giver programmøren mulighed for at opbygge kodeblokke, hvilket potentielt kunne repræsentere én motor. Hertil skal motoren have \textit{n}-antal inputs for at starte, hvortil outputs oftest repræsenteres i HEX-kode - som er almen koderepræsentation på frekvensomformere\fn{Frekvensomformer}{Anvendes til at regulere motorer; deres eksponentielle startid, spin-hastighed m.v.}. Et simpelt FBD-diagram kan ses på figur \ref{fig:FBD}.

\figur{Figurer/Billeder/FBD.jpg}{Grafisk repræsentation af et FDB}{FBD}{0.4}

\noindent FFD\mfix{Hvad er FFD nu? Det er ikke nævnt før} er en repræsentation, som de erfarne PLC-programmører anvender. FBD kan fungere som et bibliotek, som kan importeres i konkrete implementationer, og dermed give den ønskede funktionalitet til projektet. \cite{FDB_desc}

\subsubsection{Instruction List}
IL\fn{IL}{Instruction List} beskrives nemmest som en tekstrepræsenteret LAD-programmeringsform. Et IL-sprog består af en række instruktioner; én instruks pr. linje. En instruks kan bestå af én eller flere operander. Ulempen ved IL er dog, at PLC-producenterne ikke vælger at følge konventionen (jf. IEC 1131-3), hvorved notationen skifter på tværs af producenterne. Figur \ref{fig:plc-il} viser et simpelt eksempel på et IL-repræsenteret program. \textit{LD} udtrykker operatoren, og instruerer at \textit{A} skal indlæses i Memory Address Register, MAR\fn{MAR}{Memory Address Register: Holder hukommelsesplaceringen af dét data som ønskes tilgået}. Det kan dermed blive kaldt af andre operationer. Den næste linje, har det boolske udtryk, \textit{ANDN}, som definerer at \textit{B} ikke skal registreres. \textit{ST} er et udtryk for at resultatet skal indlæses i \textit{C}. Programmøren skal dog være opmærksom på - som det også blev nævnt tidligere - at PLC-producenterne har valgt deres egne notationer. Hertil kan det nævnes, at OMRON benævner operatoren \textit{ST} som \textit{OUT}, hvor Siemens eksempelvis har valgt \textit{AN} som deres notation for \textit{ANDN}. \cite{FDB_desc}

\figur{Figurer/Billeder/plc-il.png}{Simpel illustration af et IL-repræsenteret PLC-program}{plc-il}{0.3}

\subsubsection{Opsummering}

%% PROS
\noindent Efter eksempler for hvordan en PLC kan programmeres ved hjælp af den tidligere omtalte IEC-standard. Fælles for dem alle, er at de benytter de samme komponenter. Det er en fordel, da man kan benytte forskellige sprog til samme program. Ligeledes kan den enkelte programmør vælge det sprog, de mener passer bedst til dem. Ladder-programmering henvender sig specielt til elektrikere, da symbolikken der bruges ligner mekaniske kontaktorer\mfix{Hvad er det?}. Function Block Diagram henvender sig til elektronikteknikere, da symbolikken minder meget om logiske AND og OR gates.

%%CONS
Fælles for alle de omtalte sprog, er at de som tidligere nævnt, benytter sig af de samme objekter. Det sætter en række begrænsninger i hvordan man kan designe sin kodearkitektur. Ved store systemer opdeler man ofte programmet i forskellige abstraktioner. Ligeledes indkapsler man forskellige dele, for at øge læsbarheden samt bidrage til simpliciteten. Disse udfordringer er specielt gældende for overstående IEC standard, da sproget er designet fra et perspektiv om at forskellige typer programmører skal kunne skrive PLC-kode. Disse typer kunne eksempelvis være lektrikere, elektronikteknikere og computerprogrammører.


%\subsection{Siemens}
%Siemens er klart de største på PLC markedet, og med fire generationer af PLC´er har Siemens erfaring med produceringen af softwaren og hardware til PLC´en.

%Den fjerde generation Sematic 7 som er den nuværende, bliver brugt i mange aspekter i industrien, heriblandt specielt automatisering af handlinger på fabrikker.
%Dette kunne f.eks. være en slagter, som laver flere tons hakket kød. Her har man før i tiden, skulle have en medarbejder, til at finde ud af hvornår der skulle mere kød i maskinen, hvor man nu har en PLC til med tilhørende sensorer som styrer hvornår der kan komme mere kød i.
%Siemens benytter hertil 3 forskellige programmeringssprogs, hvor det ene er  Ladderprogramming som indeholder en editor, compiler samt en debugger. 
%Editoren gør det muligt at skrive eller ændre i filer herunder kan man også benytte blokke. blokke kan man betegne lidt som en slags modul, hvor man let kan indsætte flere funktioner med en enkelt blok eller flere blokke.
%Dernæst bruger man dets kompiler, som kompilere koden, sammen med blokkene som man har brugt.
%Dette bliver dernæst omdannet til maskinkode som dernæst bliver kørt igennem debuggeren.
%Debuggeren kigger maskinkoden igennem efter logiske fejl, som kunne være opstået. 
%Til får man en compileret udgave af programmet som er tjekket for logiske fejl, som dernæst kan overføres til PLC´en.

%Ideen med denne type af programmeringssprog, er at det skulle være let, for en ikke programmør at komme i gang med programmering, uden yderligere oplæring. Dermed er ideen om drag-and-drop kodning, ganske simpel for en medarbejder at komme i gang med.

% \subsubsection{Interface for Ladderprogrammering}
% Interfacet til Ladderprogrammering på Siemens PLC´er, er meget simpelt og er opbygget som vist på Figur \ref{fig:SiemensLadder}.

% \figur{Figurer/SiemensLadder.png}{Siemens programmerings interfacel}{SiemensLadder}{1}

% \noindent Programmet har en menu i venstre side, hvor programmøren kan vælge kodeblocke og indsætte direkte i koden som et modul.
% Programmøren har ligeledes mulighed for finde instruktioner som f.eks. hvordan man inverter en værdi, eller simpelt bit logik, i venstre side af programmet.
% I højre side af programmet har man sit hovedvindue, hvor alt det grafiske bliver repræsenteret.

% \subsection{Omron}
% Omron har eksisteret siden 1972, hvor Omron begyndte at producere små enheder til f.eks. lommeregnere. Nogle af disse komponenter som blandt andet blev leveret til Harvard University, blev betegnet for at være en form for PLC, dog blev den aldrig masseproduceret, og blev derfor kun specielt produceret.
% Det var først i 1977 hvor Omron producerede deres standardlinje af PLC´er kaldet SYSMAC PLC, som blev masseproduceret. Her blev Omrons tidligere erfaringer med små enheder - microcontrollere samlet til at konstruere en PLC, som var starten på Omrons PLC marked.
% Næsten 10 år efter producerede Omron C200H PLC, som bliver brugt endnu den dag, i dag. Dog havde Omron svært ved at sælge den, mest af alt pga. at Siemens havde 4 år forinden lanceret deres Simatic S5, som var banebrydende på det givende tidspunkt.
% I dag har omron ca. 40 procent af markede på PLCér i Japan og operere i mere end 80 lande, herunder i Europa, Nord America, Kina og Asien.
% \mefix{indsæt http://www.omron.com/about/corporate/business/domain/iab/index.html}

% \subsection{CODESYS}
% CODESYS er udviklet af det Tyske softwarefirma 3S-Smart Software Solutions som i 1994 var klar med første udgave af CODESYS V 1.0 hvilket var tiden hvor automatisering af handlinger virkelig begynde at blive udnyttet.

% I modsætning til flere af CODESYS’ konkurrenter valgte de at udgive deres produkt med en gratis licens. Dette gjorde at de blev meget attraktive på marked, da man ikke længere skulle investere store midler i licenser, når man kunne få det gratis med produktet.
% Det som gør CODESYS’en speciel er at de har implementeret et objektorienteret  programmeringssprog i version 3, som gør at man lettere kan adskille forskellige arbejdsopgaver, og dermed muligheden for at outsource dele af programmet.
% Den objektorienteret tilgang introducere metoder, interfaces, klasser og polymorfi samt try/catch.

% Dette er dog først blevet implementeret i CODESYS V3, hvor der førhen ikke har været den objektorienteret tilgang, hvilket gjorde det usikkert i forhold til exception handling.
% Exception handlingen har gjort det væsentligt mere sikkert, i forhold til at medarbejderen som planlægger hvad PLC´en skal gøre, har mulighed for at tage sikkerhedsforanstaltninger med hensyn til hvad maskinen skal gøre hvis den oplever en fejl.
% Ved at forudse og behandle eventuelle fejl, kan man på den måde altid få maskinen til at lukke helt ned, med en finally-block i try/catch.