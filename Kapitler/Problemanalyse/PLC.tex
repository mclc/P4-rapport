\section{PLC}
\textit{Hvad er PLC? - introducer læseren for PLC'en}

\tikzfigure{Figurer/TikZ/PLCArchitecture.tex}{PLC arkitektur. http://www.d.umn.edu/~snorr/ece4951s7/Lect4.pdf}{plcarch}

\subsection{Hardware}
\textit{Hvem laver PLC'er?}
\textit{PLC-hardware, transisterer, relæer m.v.}
\textit{Forklar formål}
\begin{itemize}
    \item PLC-producenter (skal omskrives)
    \item Sammenlign med andre control-systems (hvorfor er PLC'er smarte?)
\end{itemize}




\subsection{Siemens}
Siemens er klart de største på PLC markedet, og med 4 generationer af PLC´er har Siemens erfaring med produceringen af softwaren og hardware til PLC´en.\\
Den 4 generation Sematic 7 som er den nuværende, bliver brugt i mange aspekter i industrien, heriblandt specielt automatisering af handlinger på fabrikker.
Dette kunne f.eks. være en slagter, som laver flere tons hakket kød. Her har man før i tiden, skulle have en medarbejder, til at finde ud af hvornår der skulle mere kød i maskinen, hvor man nu har en PLC til med tilhørende sensorer som styrer hvornår der kan komme mere kød i.
Siemens benytter hertil 3 forskellige programmeringssprogs, hvor det ene er  Ladderprogramming som indeholder en editor, compiler samt en debugger. 
Editoren gør det muligt at skrive eller ændre i filer herunder kan man også benytte blokke. blokke kan man betegne lidt som en slags modul, hvor man let kan indsætte flere funktioner med en enkelt blok eller flere blokke.
Dernæst bruger man dets kompiler, som kompilere koden, sammen med blokkene som man har brugt.
Dette bliver dernæst omdannet til maskinkode som dernæst bliver kørt igennem debuggeren.
Debuggeren kigger maskinkoden igennem efter logiske fejl, som kunne være opstået. 
Til får man en compileret udgave af programmet som er tjekket for logiske fejl, som dernæst kan overføres til PLC´en.\\
Ideen med denne type af programmeringssprog, er at det skulle være let, for en ikke programmør at komme i gang med programmering, uden yderligere oplæring. Dermed er ideen om drag-and-drop kodning, ganske simpel for en medarbejder at komme i gang med.

\subsubsection{Interface for Ladderprogrammering}
Interfacet til Ladderprogrammering på Siemens PLC´er, er meget simpelt og er opbygget som vist på Figur \ref{fig:SiemensLadder} 

\figur{Figurer/SiemensLadder.png}{Siemens programmerings interfacel}{SiemensLadder}{1}

\noindent Programmet har en menu i venstre side, hvor programmøren kan vælge kodeblocke og indsætte direkte i koden som et modul.
Programmøren har ligeledes mulighed for finde instruktioner som f.eks. hvordan man inverter en værdi, eller simpelt bit logik, i venstre side af programmet.
I højre side af programmet har man sit hovedvindue, hvor alt det grafiske bliver repræsenteret.

\subsection{Omron}
Omron har eksisteret siden 1972, hvor Omron begyndte at producere små enheder til f.eks. lommeregnere. Nogle af disse komponenter som blandt andet blev leveret til Harvard University, blev betegnet for at være en form for PLC, dog blev den aldrig masseproduceret, og blev derfor kun specielt produceret.
Det var først i 1977 hvor Omron producerede deres standardlinje af PLC´er kaldet SYSMAC PLC, som blev masseproduceret. Her blev Omrons tidligere erfaringer med små enheder - microcontrollere samlet til at konstruere en PLC, som var starten på Omrons PLC marked.
Næsten 10 år efter producerede Omron C200H PLC, som bliver brugt endnu den dag, i dag. Dog havde Omron svært ved at sælge den, mest af alt pga. at Siemens havde 4 år forinden lanceret deres Simatic S5, som var banebrydende på det givende tidspunkt.
I dag har omron ca. 40 procent af markede på PLCér i Japan og operere i mere end 80 lande, herunder i Europa, Nord America, Kina og Asien.
\mefix{indsæt http://www.omron.com/about/corporate/business/domain/iab/index.html}

\subsection{CODESYS}
CODESYS er udviklet af det Tyske softwarefirma 3S-Smart Software Solutions som i 1994 var klar med første udgave af CODESYS V 1.0 hvilket var tiden hvor automatisering af handlinger virkelig begynde at blive udnyttet.\\
I modsætning til flere af CODESYS’ konkurrenter valgte de at udgive deres produkt med en gratis licens. Dette gjorde at de blev meget attraktive på marked, da man ikke længere skulle investere store midler i licenser, når man kunne få det gratis med produktet.
Det som gør CODESYS’en speciel er at de har implementeret et objektorienteret  programmeringssprog i version 3, som gør at man lettere kan adskille forskellige arbejdsopgaver, og dermed muligheden for at outsource dele af programmet.
Den objektorienteret tilgang introducere metoder, interfaces, klasser og polymorfi samt try/catch.\\
Dette er dog først blevet implementeret i CODESYS V3, hvor der førhen ikke har været den objektorienteret tilgang, hvilket gjorde det usikkert i forhold til exception handling.
Exception handlingen har gjort det væsentligt mere sikkert, i forhold til at medarbejderen som planlægger hvad PLC´en skal gøre, har mulighed for at tage sikkerhedsforanstaltninger med hensyn til hvad maskinen skal gøre hvis den oplever en fejl.
Ved at forudse og behandle eventuelle fejl, kan man på den måde altid få maskinen til at lukke helt ned, med en finally-block i try/catch.



\subsection{Software}
\textit{Hvordan programmers PLC'er?}
\textit{Forklar formål}
\begin{itemize}
    \item PLC-programmering (sprog)
    \begin{itemize}
        \item Function Block-diagram
        \item Function Block-diagram
        \item Instruction List
    \end{itemize}
    \item Scan-time (run-through)
\end{itemize}




\subsection{PLC-Programmering}
%% Gennemgang af plc programmering
%%Forklar om sproget med fokus på paradigme
PLC-programmeringssproget har ikke udviklet sig meget siden indtoget i 1960’erne. Mange af PLC-producenterne holder fast i den oprindelige opfattelse (IEC 61131-3); at PLC’er hovedsagligt anvendes til mindre programmeringsopgaver. De mest udbredte PLC’er til dato, programmeres stadig i paradigmet, RLL (Relay Ladder Logic). Programmeringssproget er ret primitivt, og det er meget besværligt at være produktiv – især ved større projekter. Dette skyldes blandt andet, at flere PLC-programmører ikke benytter sig af subrutiner, og ved større projekter, mister den enkelte programmør simpelthen overblikket. 

I 1993 blev det første udkast til IEC (International Electrical Commission) 61131-3 standarden publiceret\cite{iecStandard}. Standarden havde til formål at sikre en generalisering af hvordan software til PLC'er skrives og forstås. Igennem årene er det blevet mere og mere normalt, at både slutkunden, leverandøren og PLC-producenten følger, og efterspørger denne standard. Mange slutkunder, står selvstændigt for vedligeholdelsen og om-programmering af deres automatiserede anlæg, har ikke den fornødne kapacitet til at få indopereret en ny standard i deres travle arbejdsmiljø. \\

\noindent Flere programmeringsfirmaer har dog forsøgt at indfase det OOP (Object-Oriented Programming) programmeringsparadigme i PLC-universet. For mange almindelige industriteknikere, som også fungerer som PLC-programmører i industrien, bliver OOP dog for omstændelig. Mange PLC-programmører holder derfor fast i de gamle og velkendte programmeringsrutiner. Dette kan i visse tilfælde, som nævnt tidligere, ligeledes skyldes arbejdspladsens konservative indgangsvinkel. \cite{PLC_Siemens_OOP} \\

\noindent IEC 61131-3 standarden, definerer 4 forskellige programmeringssprog til en PLC. To grafiske og to tekstrepræsenteret sprog. Alle sprog deler de samme objekter, hvilket gør det nemt at oversætte fra det ene sprog til det andet. Ligeledes giver det programmører mulighed for at manøvrerer frit mellem alle sprog, hvilket giver den enkelte programmør mulighed for at tilpasse sine egne programmeringsmæssige fremgangsmetoder. 

\jfix{Gennemgå alle 4}

\subsubsection{Ladder Programmering (Relay Ladder Logic)}
Ladder Programmering er et grafisk programmeringssprog, der har fået navnet fra dens grafiske repræsentation, som der kan ligne en stige. Ladder Programmering skrives i et IDE, hvor man ved hjælp af Drag \& Drop-funktionalitet, kan indsætte kontaktsymboler, timere og meget mere. På figur \ref{fig:Ladder} kan et eksempel på et meget simpelt Ladder-program ses. Normalt-lukket og normalt-åbent kontaktsymboler kunne eventuelt repræsenterer et almindeligt relæ, som sætter en indgang på PLC'en. På første linje, bliver udgangen Q10.00 høj, når både kontaktsæt ( ( 000.01 \&\& 000.04) || 000.00 ) \&\& 000.02 ) er høj.

\figur{Figurer/Billeder/Ladder.png}{Grafisk repræsentation af ladder programmering}{Ladder}{0.4}

\subsubsection{Function Block Diagram}
Function Block Diagram er den anden grafiske måde at programmere en plc. FBD er programmet ved hjælp af logiske AND og OR blokke. Man kan på samme måde som i Ladder programmering bruge mere avancerede blokke som timere og tællere. På figur \ref{fig:FBD} ses et eksempel på Et simpelt Function Block Diagram.

\figur{Figurer/Billeder/FBD.png}{Grafisk repræsentation af et Function Block Diagram}{FBD}{0.6}

\subsubsection{Instruction List}
IL er en af de tekstrepræsenterede måder man kan programmere en plc på. IL fungerer på nøjagtig samme måde som ladder og FBD. Ved hjælp af de samme komponenter kan man programmere den samme logiske struktur eller udtryk. På figur \ref{fig:plc-all} ses alle de forskellige programmeringssprog udføre den samme logik med de samme komponenter.

\figur{Figurer/Billeder/plc-all.png}{Figuren viser alle 4 programmeringssprog som er omfattet af IEC 61131-3 standarden, udføre det den samme logik.}{plc-all}{0.6}

%% PROS
\noindent Nu har vi set eksempler for hvordan en plc kan programmeres ved hjælp af den tidligere omtalt IEC standard. fælles for dem alle er at de benytter de samme komponenter. Det er en fordel da man kan benytte forskellige sprog til samme program. Ligeledes kan den enkelte programmør vælge det sprog de mener passer bedst til dem. Ladder programmering henvender sig specielt til elektrikeree da symbolikken der bruges ligner mekaniske kontaktorer. Function Block Diagram henvender sig til elektronikteknikere da symbolikken minder meget om logiske AND og OR gates.

%%CONS
Fælles for alle de omtalte sprog, er at de som tidligere nævnt benytter sig af de samme objekter. Det sætter en række begrænsninger i hvordan man kan designe sin kodearkitektur. Ved store systemer opdeler man ofte programmet i forskellige abstraktioner. Ligeledes indkapsler man forskellige dele, for at øge læsbarheden samt bidrage til simpliciteten. Disse udfordringer er specielt gældende for overstående IEC standard, da sproget er designet fra et perspektiv om at forskellige typer programmører skal kunne skrive plc kode. Typer som f.eks. Elektrikere, elektronikteknikere og computerprogrammører.